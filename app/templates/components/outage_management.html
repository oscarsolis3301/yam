{% macro render_outage_management(current_user) %}
{% if current_user.role == 'admin' %}
<div class="dashboard-row">
    <div class="dashboard-list-card">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="dashboard-section-title mb-0">Current Outages</div>
            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#outageModal">
                <i class="bi bi-plus-circle"></i> Add Outage
            </button>
        </div>
        <div class="scrollable-container">
            <div id="outagesList" class="list-group"></div>
        </div>
    </div>
</div>

<!-- Outage Creation Modal -->
<div class="modal fade" id="outageModal" tabindex="-1" aria-labelledby="outageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white">
            <div class="modal-header">
                <h5 class="modal-title" id="outageModalLabel">Create New Outage Alert</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="outageForm">
                    <div class="mb-3">
                        <label for="outageTitle" class="form-label">Title</label>
                        <input type="text" class="form-control bg-dark text-white" id="outageTitle" required placeholder="e.g., Network Outage, System Maintenance">
                    </div>
                    <div class="mb-3">
                        <label for="outageDescription" class="form-label">Description</label>
                        <textarea class="form-control bg-dark text-white" id="outageDescription" rows="3" required placeholder="Please provide details about the outage"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="outageTicket" class="form-label">Ticket ID (Optional)</label>
                        <input type="text" class="form-control bg-dark text-white" id="outageTicket" placeholder="e.g., INC12345">
                    </div>
                    <div class="mb-3">
                        <label for="affectedSystems" class="form-label">Affected Systems (Optional)</label>
                        <input type="text" class="form-control bg-dark text-white" id="affectedSystems" placeholder="e.g., Email, VPN, CRM">
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifyTeams">
                        <label class="form-check-label" for="notifyTeams">
                            Notify via Microsoft Teams
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="saveOutage">Create Outage Alert</button>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endmacro %} 